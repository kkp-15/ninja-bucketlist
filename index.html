<!DOCTYPE html><html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚¿ã‚¤ãƒ ãƒã‚±ãƒƒãƒˆãƒªã‚¹ãƒˆ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ã‚¿ã‚¤ãƒ ãƒã‚±ãƒƒãƒˆã§ã‚„ã‚ŠãŸã„ã“ã¨ã‚’æ•´ç†ï¼</h1>  <form id="addForm">
    <input type="text" id="title" placeholder="ã‚„ã‚ŠãŸã„ã“ã¨" required>
    <input type="number" id="age" placeholder="é”æˆã—ãŸã„å¹´é½¢">
    <input type="text" id="category" placeholder="ã‚¸ãƒ£ãƒ³ãƒ«">
    <textarea id="memo" placeholder="ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰"></textarea>
    <button type="submit">è¿½åŠ </button>
  </form>  <div id="list"></div>  <footer>
    <p><a href="https://twitter.com/kkp_webninja" target="_blank">@kkp_webninja ã‚’ãƒ•ã‚©ãƒ­ãƒ¼</a></p>
  </footer>  <script>
    const form = document.getElementById('addForm');
    const listContainer = document.getElementById('list');
    let bucketData = JSON.parse(localStorage.getItem('bucketData') || '[]');

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const title = document.getElementById('title').value.trim();
      const age = document.getElementById('age').value.trim();
      const category = document.getElementById('category').value.trim();
      const memo = document.getElementById('memo').value.trim();
      if (!title) return;
      bucketData.push({ title, age, category, memo, done: false });
      localStorage.setItem('bucketData', JSON.stringify(bucketData));
      form.reset();
      renderList();
    });

    function renderList() {
      listContainer.innerHTML = '';
      const grouped = {};
      bucketData.forEach((item, index) => {
        const decade = item.age ? Math.floor(item.age / 10) * 10 : 'æœªåˆ†é¡';
        if (!grouped[decade]) grouped[decade] = [];
        grouped[decade].push({ item, index });
      });
      const sortedKeys = Object.keys(grouped).sort((a, b) => a === 'æœªåˆ†é¡' ? 1 : b === 'æœªåˆ†é¡' ? -1 : a - b);
      sortedKeys.forEach(decade => {
        const section = document.createElement('details');
        section.open = true;
        section.innerHTML = `<summary>${decade}ä»£ï¼ˆ${grouped[decade].length}ä»¶ï¼‰</summary>`;
        grouped[decade].forEach(({ item, index }) => {
          const div = document.createElement('div');
          div.className = 'item' + (item.done ? ' done' : '');
          div.innerHTML = `
            <strong>${item.title}</strong><br>
            ${item.category ? `ã‚¸ãƒ£ãƒ³ãƒ«ï¼š${item.category}<br>` : ''}
            ${item.age ? `äºˆå®šå¹´é½¢ï¼š${item.age}æ­³<br>` : ''}
            ${item.memo ? `ãƒ¡ãƒ¢ï¼š${item.memo}<br>` : ''}
            <button onclick="toggleDone(${index})">${item.done ? 'æœªé”æˆã«æˆ»ã™' : 'âœ… é”æˆ'}</button>
            <button onclick="editItem(${index})">ğŸ–‹ ç·¨é›†</button>
            <button onclick="deleteItem(${index})">ğŸ—‘ å‰Šé™¤</button>
          `;
          section.appendChild(div);
        });
        listContainer.appendChild(section);
      });
    }

    function toggleDone(index) {
      bucketData[index].done = !bucketData[index].done;
      localStorage.setItem('bucketData', JSON.stringify(bucketData));
      renderList();
    }

    function deleteItem(index) {
      if (confirm('å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã„ã§ã™ã‹ï¼Ÿ')) {
        bucketData.splice(index, 1);
        localStorage.setItem('bucketData', JSON.stringify(bucketData));
        renderList();
      }
    }

    function editItem(index) {
      const item = bucketData[index];
      const newTitle = prompt('ã‚„ã‚ŠãŸã„ã“ã¨ã‚’ä¿®æ­£', item.title);
      if (newTitle !== null) item.title = newTitle;
      const newAge = prompt('é”æˆã—ãŸã„å¹´é½¢ã‚’ä¿®æ­£', item.age);
      if (newAge !== null) item.age = newAge;
      const newCategory = prompt('ã‚¸ãƒ£ãƒ³ãƒ«ã‚’ä¿®æ­£', item.category);
      if (newCategory !== null) item.category = newCategory;
      const newMemo = prompt('ãƒ¡ãƒ¢ã‚’ä¿®æ­£', item.memo);
      if (newMemo !== null) item.memo = newMemo;
      localStorage.setItem('bucketData', JSON.stringify(bucketData));
      renderList();
    }

    renderList();
  </script></body>
</html>

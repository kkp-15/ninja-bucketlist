<!DOCTYPE html><html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚„ã‚ŠãŸã„äº‹ãƒªã‚¹ãƒˆ - ã‚¿ã‚¤ãƒ ãƒã‚±ãƒƒãƒˆ</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 1rem;
      background-color: #f0f8ff;
    }
    h1, h2 {
      text-align: center;
    }
    form, .bucket-section {
      max-width: 600px;
      margin: 1rem auto;
      background: white;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
    }
    input, textarea, select, button {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 0.5rem;
    }
    button {
      background: #007acc;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #005fa3;
    }
    .item {
      background: #f9f9f9;
      padding: 0.8rem;
      margin-bottom: 0.5rem;
      border-radius: 5px;
    }
    .item.done {
      background: #d0ffd0;
    }
    .buttons {
      margin-top: 0.5rem;
      display: flex;
      gap: 0.5rem;
    }
    summary {
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
    }
    .summary-text {
      text-align: center;
      font-weight: bold;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>ã‚„ã‚ŠãŸã„äº‹ãƒªã‚¹ãƒˆï¼ˆã‚¿ã‚¤ãƒ ãƒã‚±ãƒƒãƒˆï¼‰</h1>  <form id="ageForm">
    <label for="birth">ã‚ãªãŸã®ç”Ÿå¹´æœˆæ—¥</label>
    <input type="date" id="birth" required>
    <button type="submit">å¹´é½¢ã‚’ä¿å­˜</button>
  </form>  <form id="form">
    <label for="title">ã‚„ã‚ŠãŸã„ã“ã¨</label>
    <input type="text" id="title" placeholder="ä¾‹ï¼šå®¶æ—ã§äº¬éƒ½æ—…è¡Œ" required><label for="category">ã‚¸ãƒ£ãƒ³ãƒ«</label>
<select id="category" required>
  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
  <option value="æ—…è¡Œ">âœˆï¸ æ—…è¡Œ</option>
  <option value="å­¦ç¿’">ğŸ“˜ å­¦ç¿’</option>
  <option value="å¥åº·">ğŸƒ å¥åº·</option>
  <option value="è¶£å‘³">ğŸ¨ è¶£å‘³</option>
  <option value="å‰¯æ¥­">ğŸ’¼ å‰¯æ¥­</option>
  <option value="ãã®ä»–">ğŸ”§ ãã®ä»–</option>
</select>

<label for="age">å®Ÿè¡Œäºˆå®šå¹´é½¢</label>
<input type="number" id="age" placeholder="ä¾‹ï¼š50" required>

<label for="hours">æ‰€è¦æ™‚é–“ï¼ˆæ™‚é–“ï¼‰</label>
<input type="number" id="hours" min="0.5" step="0.5" placeholder="ä¾‹ï¼š3" required>

<label for="deadline">æœŸé™ï¼ˆä»»æ„ï¼‰</label>
<input type="date" id="deadline">

<label for="memo">ãƒ¡ãƒ¢</label>
<textarea id="memo" placeholder="è²»ç”¨ç›®å®‰ã€æº–å‚™ã™ã‚‹ã“ã¨ãªã©"></textarea>

<button type="submit">ãƒªã‚¹ãƒˆã«è¿½åŠ </button>

  </form>  <div class="summary-text" id="summary"></div>  <div class="bucket-section">
    <details open>
      <summary>ğŸ”¥ ä»Šã‚„ã‚‹ã¹ã</summary>
      <div id="now"></div>
    </details>
    <details>
      <summary>ğŸ’ª æ´»å‹•æœŸï¼ˆ49ã€œ55æ­³ï¼‰</summary>
      <div id="active"></div>
    </details>
    <details>
      <summary>ğŸ’¼ å¾ŒæœŸï¼ˆ56ã€œ65æ­³ï¼‰</summary>
      <div id="later"></div>
    </details>
    <details>
      <summary>ğŸ§“ ã‚»ã‚«ãƒ³ãƒ‰ãƒ©ã‚¤ãƒ•ï¼ˆ66æ­³ã€œï¼‰</summary>
      <div id="old"></div>
    </details>
  </div>  <script>
    const ageForm = document.getElementById("ageForm");
    const birthInput = document.getElementById("birth");
    const form = document.getElementById("form");
    const summary = document.getElementById("summary");
    const listAreas = {
      now: document.getElementById("now"),
      active: document.getElementById("active"),
      later: document.getElementById("later"),
      old: document.getElementById("old")
    };

    let list = JSON.parse(localStorage.getItem("bucketList")) || [];
    let birth = localStorage.getItem("birth") || "";

    if (birth) birthInput.value = birth;

    function getCurrentAge() {
      if (!birth) return 0;
      const b = new Date(birth);
      const today = new Date();
      let age = today.getFullYear() - b.getFullYear();
      const m = today.getMonth() - b.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < b.getDate())) age--;
      return age;
    }

    function getBucketCategory(execAge) {
      const currentAge = getCurrentAge();
      if (execAge <= currentAge + 5) return "now";
      if (execAge <= 55) return "active";
      if (execAge <= 65) return "later";
      return "old";
    }

    function save() {
      localStorage.setItem("bucketList", JSON.stringify(list));
    }

    function render() {
      Object.values(listAreas).forEach(el => el.innerHTML = "");
      let total = 0, done = 0;

      list.forEach((item, i) => {
        const div = document.createElement("div");
        div.className = "item" + (item.done ? " done" : "");
        div.innerHTML = `
          <strong>${item.title}</strong><br>
          ã‚¸ãƒ£ãƒ³ãƒ«: ${item.category}<br>
          å®Ÿè¡Œäºˆå®šå¹´é½¢: ${item.age}æ­³<br>
          æ‰€è¦æ™‚é–“: ${item.hours} æ™‚é–“<br>
          æœŸé™: ${item.deadline || "æœªè¨­å®š"}<br>
          ãƒ¡ãƒ¢: ${item.memo || "ãªã—"}
        `;

        const btns = document.createElement("div");
        btns.className = "buttons";
        const doneBtn = document.createElement("button");
        doneBtn.textContent = item.done ? "æœªå®Œäº†ã«æˆ»ã™" : "é”æˆ";
        doneBtn.onclick = () => {
          list[i].done = !list[i].done;
          save(); render();
        };
        const delBtn = document.createElement("button");
        delBtn.textContent = "å‰Šé™¤";
        delBtn.onclick = () => {
          if (confirm("å‰Šé™¤ã—ã¦ã‚ˆã„ã§ã™ã‹ï¼Ÿ")) {
            list.splice(i, 1);
            save(); render();
          }
        };
        btns.appendChild(doneBtn);
        btns.appendChild(delBtn);
        div.appendChild(btns);

        const category = getBucketCategory(item.age);
        listAreas[category].appendChild(div);

        total += parseFloat(item.hours);
        if (item.done) done += parseFloat(item.hours);
      });
      summary.textContent = `ç·æ™‚é–“: ${total} æ™‚é–“ ï¼ é”æˆæ¸ˆã¿: ${done} æ™‚é–“`;
    }

    ageForm.onsubmit = (e) => {
      e.preventDefault();
      birth = birthInput.value;
      localStorage.setItem("birth", birth);
      render();
    };

    form.onsubmit = (e) => {
      e.preventDefault();
      const item = {
        title: form.title.value,
        category: form.category.value,
        age: parseInt(form.age.value),
        hours: parseFloat(form.hours.value),
        deadline: form.deadline.value,
        memo: form.memo.value,
        done: false
      };
      list.push(item);
      save();
      render();
      form.reset();
    };

    render();
  </script></body>
</html>
